pico-8 cartridge // http://www.pico-8.com
version 29
__lua__
function _init()
	t=0
end

function _draw()
	cls()
	rectfill(0,0,128,128,6)
	drawchar()
end

function drawchar()
	if char.shooting then
		char.sprite = 3
	end
	if char.running then
		if char.shooting then
			if t%10==0 then
				if char.sprite == 3 then
					char.sprite = 4
				else
					char.sprite = 3
				end
			end
		else
			if t%10==0 then
				if char.sprite == 1 then
					char.sprite = 2
				else
					char.sprite = 1
				end
			end
		end
	else
		char.sprite = 1
	end
	
	
	palt(0,false)
	palt(6,true)
	spr(char.sprite,char.x,char.y,1,1,char.isleft)
end

function _update()
	t+=1
	if btn(⬅️) or btn(➡️) then
		char.running=true
	else
		char.running=false
	end
	if btn(⬅️) then
		char.isleft = true
		char.x-=1
	elseif btn(➡️) then
		char.isleft = false
		char.x+=1
	end
	if btnp(❎) then
		sfx(0)
		char.shooting = true
	end
	if char.shooting then
		char.shootdir-=1
	end
	if char.shootdir <= 0 then
		char.shooting = false
		char.shootdir = 10
	end
end

char = {
x = 64,
y=64,
isleft=false,
shooting=false,
running=false,
sprite=1,
shootdir = 10
}

function shoot()
	dur -= 1
	if dur <=0 then
		char.shooting=false
		return
	else
		return	shoot(dur)
	end
end
__gfx__
00000000660000066600000666000006660000060000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000060ccccc060ccccc060ccccc060ccccc00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
007007000cc71f710cc71f710cc71f710cc71f710000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000770000cc71f710cc71f710cc71f710cc71f710000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0007700060cffff660cffff660cffff660cffff60000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
007007006611116666111166661111cc661111cc0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000066cccc6666cccc1666cccc6666cccc160000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000066c16c1666c1666666c16c1666c166660000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
000100002a15000000000002115000000000000000014150000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
